var TcHmi;!function(TcHmi){let Controls;!function(Controls){let BaseTemplate;!function(BaseTemplate){class TcHmiBreadcrumb extends TcHmi.Controls.System.TcHmiControl{constructor(element,pcElement,attrs){super(element,pcElement,attrs),this.__breadcrumbData=[],this.__breadcrumbButtons=[],this.__callback=function(content){},this.__breadcrumbEvents=[],this.__onResolverForTextColorWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("textColor"),tchmi_equal(data.value,this.__textColor)||(this.__textColor=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextColor"}),this.__processTextColor())}}__previnit(){if(this.__elementTemplateRoot=this.__element[0].getElementsByClassName("TcHmi_Controls_BaseTemplate_TcHmiBreadcrumb-Template")[0],!this.__elementTemplateRoot)throw new Error("Invalid Template.html");super.__previnit()}__init(){super.__init()}__attach(){super.__attach(),this.__resizeEventDestroyer=TcHmi.EventProvider.register(this.__id+".onResized",this.__onResized())}__detach(){super.__detach(),this.__resizeEventDestroyer&&(this.__resizeEventDestroyer(),this.__resizeEventDestroyer=void 0)}destroy(){this.__keepAlive||(this.__resetTcHmiBreadcrumb(),super.destroy())}setBreadcrumbData(valueNew,callback){this.__resetTcHmiBreadcrumb(),this.__breadcrumbData=valueNew,this.__callback=callback;let width=0;for(let e of valueNew){let btn=this.__createTcHmiBreadcrumbButton(e,!1);width+=null==btn?void 0:btn.getElement()[0].getBoundingClientRect().width}width>this.__element[0].clientWidth&&(this.__resetTcHmiBreadcrumb(),this.__createTcHmiBreadcrumbButton(valueNew[valueNew.length-2],!0))}__createTcHmiBreadcrumbButton(element,backwards){if(void 0===TcHmi.Controls.get(this.getId()+"."+element.id)){let button=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.getId()+"."+element.id,{"data-tchmi-text":element.name,"data-tchmi-text-horizontal-alignment":"Left","data-tchmi-text-font-size":this.__textFontSize,"data-tchmi-text-font-size-unit":this.__textFontSizeUnit},this);if(button)return this.__elementTemplateRoot.append(button.getElement()[0]),this.__breadcrumbButtons.push(button),this.__breadcrumbButtons.length===this.__breadcrumbData.length||backwards?backwards?(button.getElement()[0].classList.add("arrow-backwards"),this.__breadcrumbEvents.push(TcHmi.EventProvider.register(this.getId()+"."+element.id+".onPressed",this.__onBreadcrumbBtnClick(element)))):button.getElement().addClass("active"):(button.getElement()[0].classList.add("arrow"),this.__breadcrumbEvents.push(TcHmi.EventProvider.register(this.getId()+"."+element.id+".onPressed",this.__onBreadcrumbBtnClick(element)))),button}return null}__resetTcHmiBreadcrumb(){if(this.__elementTemplateRoot.textContent="",void 0!==this.__breadcrumbData){for(const e of this.__breadcrumbEvents)e();for(const btn of this.__breadcrumbButtons)btn.destroy();this.__breadcrumbButtons=[],this.__breadcrumbEvents=[]}}__onBreadcrumbBtnClick(element){let ___this=this;return function(event){___this.__callback&&___this.__callback(element.content)}}__onResized(){return event=>{let height=this.getRenderedHeight();height&&(this.__borderWidth&&this.__borderStyle&&("None"!==this.__borderStyle.top&&(height-=this.__borderWidth.top),"None"!==this.__borderStyle.bottom&&(height-=this.__borderWidth.bottom)),this.__element[0].style.setProperty("--tchmi-icon-size",height+"px"))}}setTextFontSize(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextFontSize")),convertedValue!==this.__textFontSize&&(this.__textFontSize=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextFontSize"}),this.__processTextFontSize())}getTextFontSize(){return this.__textFontSize}__processTextFontSize(){if(void 0!==this.__breadcrumbButtons&&void 0!==this.__textFontSize)for(const btn of this.__breadcrumbButtons)btn.setTextFontSize(this.__textFontSize)}setTextFontSizeUnit(valueNew){let convertedValue=TcHmi.ValueConverter.toFontSizeUnit(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextFontSizeUnit")),convertedValue!==this.__textFontSizeUnit&&(this.__textFontSizeUnit=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextFontSizeUnit"}),this.__processTextFontSizeUnit())}getTextFontSizeUnit(){return this.__textFontSizeUnit}__processTextFontSizeUnit(){if(void 0!==this.__breadcrumbButtons&&void 0!==this.__textFontSizeUnit)for(const btn of this.__breadcrumbButtons)btn.setTextFontSizeUnit(this.__textFontSizeUnit)}setTextColor(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextColor"));let resolverInfo=this.__objectResolvers.get("textColor");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue);this.__objectResolvers.set("textColor",{resolver:resolver,watchCallback:this.__onResolverForTextColorWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForTextColorWatchCallback)})}getTextColor(){return this.__textColor}__processTextColor(){if(void 0!==this.__breadcrumbButtons&&void 0!==this.__textColor)for(let i=0;i<this.__breadcrumbButtons.length-1;i++)this.__breadcrumbButtons[i].setBackgroundColor(this.__textColor)}}BaseTemplate.TcHmiBreadcrumb=TcHmiBreadcrumb}(BaseTemplate=Controls.BaseTemplate||(Controls.BaseTemplate={}))}(Controls=TcHmi.Controls||(TcHmi.Controls={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("TcHmiBreadcrumb","TcHmi.Controls.BaseTemplate",TcHmi.Controls.BaseTemplate.TcHmiBreadcrumb);